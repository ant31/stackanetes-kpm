---
package:
  name: quentinm/rabbitmq
  author: Quentin Machu
  version: 0.1.0
  description: rabbitmq
  license: Apache 2.0

variables:
  namespace: default

  deployment:  
    node_label: openstack-control-plane
    image: quay.io/stackanetes/stackanetes-rabbitmq:barcelona

  network:
    ip_address: "{% raw %}{{ .IP }}{% endraw %}"
    ip_address_erlang: "{% raw %}{{ .IP_ERLANG }}{% endraw %}"
    port:
      rabbitmq: 5672
      epmd: 4369
      cluster: 25672
      management: 15672

  # Credentials.
  admin_user: rabbitmq
  admin_password: password
  erlang_cookie: ERLANG_COOKIE

resources:
  # Config maps.
  - file: configmaps/rabbitmq-clusterer.config.yaml
    name: rabbitmq-rabbitmqclustererconfig
    type: configmap

  - file: configmaps/rabbitmq-env.conf.yaml
    name: rabbitmq-rabbitmqenvconf
    type: configmap

  - file: configmaps/start.sh.yaml
    name: rabbitmq-startsh
    type: configmap

  - file: configmaps/rabbitmq.config.yaml
    name: rabbitmq-rabbitmqconfig
    type: configmap

  # Daemons.
  - file: deployment.yaml
    name: rabbitmq
    type: deployment

  # Services.
  - file: service.yaml
    name: rabbitmq
    type: service

deploy:
  - name: $self
